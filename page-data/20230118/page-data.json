{"componentChunkName":"component---src-templates-post-jsx","path":"/20230118/","result":{"data":{"site":{"siteMetadata":{"title":"life log"}},"markdownRemark":{"id":"663d5301-a645-527a-978e-458d02aeae04","excerpt":"Table of Contents CRF Renditions CRF layout Design choices SDTM Datasets and Variables Parameters Creating PDF documents CRF Renditions  A short description of how the style sheet generates the CRF pâ€¦","html":"<h4>Table of Contents</h4>\n<ul>\n<li><a href=\"#CRF_Renditions\">CRF Renditions</a>\n<ul>\n<li><a href=\"#CRF_layout\">CRF layout</a></li>\n<li><a href=\"#Design_choices\">Design choices</a>\n<ul>\n<li><a href=\"#SDTM_Datasets_and_Variables\">SDTM Datasets and Variables</a></li>\n</ul>\n</li>\n<li><a href=\"#Parameters\">Parameters</a></li>\n<li><a href=\"#Creating_PDF_documents\">Creating PDF documents</a></li>\n</ul>\n</li>\n</ul>\n<h1>CRF Renditions <a name=\"CRF_Renditions\"/></h1>\n<p>A short description of how the style sheet generates the CRF pages in the browser from the ODM-xml document.</p>\n<h2>CRF layout <a name=\"CRF_layout\"/></h2>\n<p>The main feature of the CRF layout presented here is to put the SDTM annotations in a column adjacent to each question line. This way the SDTM annotations are displayed at the proper location, without the need to move boxes of annotations around inside and on top of CRF elements. Even if this takes some space from the CRF Forms width, please notice that the <a href=\"/examples/acrf.pdf\">acrf</a> is a documentation of the SDTM annotations, while the <a href=\"/examples/bcrf.pdf\">bcrf</a> is the documentation of the CRF pages themselves. This split also allows space for more rich SDTM annotations.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/5ed606ab9d42f19baaa38238652bca4e/f0257/CRF.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 38.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABLElEQVR42oWPyXKDMAyG8/4P1XO4dJlJyUJSSMxiwAs2eMEbNel26bT/RdJIn6R/s3zJeDt7y80UEylVjwm4gbbrJyGNMctv2nxnymlhFTOT9W5ZwtDldQPbBuipi90Qwl+wDz5iys0ueGdteSsghNdrMVD0PzwHK5ziVggtlVJ9jzDBmBBK6cRH7/19Kqx77mGFP4LWGiFEMOnip3dFBiPUwlYIGb0wK8Lyc/wTtmFdObAhy7I0fU2SZLfbVVVVFHm6TwEAdEB5c3nJnk75HmPIR0pnLp1e4VK0sRBGwW51GNVAyDg/nY7ny0XNOr8l2fmhrLZls8XscdJvOa9r2dngNkBApOloJWEUYUQoYYzpeS4BqJsmWkX9oeue2Xjk02mcDmquRiOwHrQ37w9rxybIICh7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Example CRF rendition from pure ODM-xml' title='' src='/static/5ed606ab9d42f19baaa38238652bca4e/ca1dc/CRF.png' srcset='/static/5ed606ab9d42f19baaa38238652bca4e/e7570/CRF.png 170w,\n/static/5ed606ab9d42f19baaa38238652bca4e/f46e7/CRF.png 340w,\n/static/5ed606ab9d42f19baaa38238652bca4e/ca1dc/CRF.png 680w,\n/static/5ed606ab9d42f19baaa38238652bca4e/02d09/CRF.png 1020w,\n/static/5ed606ab9d42f19baaa38238652bca4e/f0257/CRF.png 1048w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Example CRF rendition from pure ODM-xml</figcaption>\n  </figure></p>\n<p>The CRF rendition consists of one table for each Form in the CRF, identified as <strong>FormDef</strong> tags, having the columns below.</p>\n<ol>\n<li>A sequence number constructed from the <strong>@OrderNumber</strong> attributes of <strong>ItemGroupRef</strong> and <strong>ItemRef</strong> tags in the ODM-xml file. The number serves as a human reference when discussing and reviewing CRF content, as well as keeping track of the sorting of CRF elements. If a Form or a Question has an implementation note, a hash sign (<strong>#</strong>) is shown next to the number, and the actual note in a footnote after the CRF page, referring to the number</li>\n<li>The Question from the CRF Forms identified as <strong>Question/TranslatedText</strong> tags. Any completion instruction in tag <strong>Alias[@Context='completionInstructions']/@Name</strong> is shown with the Question</li>\n<li>The answer to the Question distinguished by <strong>@DataType</strong> attributes. Each data type is displayed as a browser specific interpretation of an HTML tag of the corresponding type. As no indication of multiple selects exist in the ODM definition, this data type is extracted from the text itself, triggered by the string <strong>all that apply</strong> within the tags\n<ul>\n<li>ItemDef/@Name</li>\n<li>ItemDef/Question/TranslatedText</li>\n<li>ItemDef/Description/TranslatedText</li>\n<li>ItemDef/Alias[@Context='completionInstructions']/@Name</li>\n</ul>\n</li>\n<li>The SDTM annotation identified as <strong>@SDSVarName</strong> attributes. Additional information is added from <strong>Alias/@Name</strong> attributes having a <strong>@Context='SDTM'</strong> attribute as SDTM annotation marker. Each sentence separated by <code class=\"language-text\">'. '</code> (period blank) in the SDTM annotation is presented on a line of its own for readability. SDTM dataset names are extracted from either <strong>ItemGroupDef/@Domain</strong> or <strong>ItemDef/@SDSVarName</strong> attributes, where the latter may be a two-level name separated by a period <code class=\"language-text\">dataset.variable</code></li>\n</ol>\n<h2>Design choices <a name=\"Design_choices\"/></h2>\n<p>All vendor specific name spaces and XML addendums to the ODM-XML file are ignored.</p>\n<p>The following assumptions regarding the specifics of the ODM-XML files XPATH are used:</p>\n<table>\n<thead>\n<tr>\n<th>CRF Element</th>\n<th>XPath</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Form Title/Name</td>\n<td>FormDef/Description/TranslatedText</td>\n<td>As it appears on the CRF</td>\n</tr>\n<tr>\n<td>Section Title/Name</td>\n<td>Sections/ItemGroup/@Name</td>\n<td>Never displayed</td>\n</tr>\n<tr>\n<td>Question Text</td>\n<td>ItemDef/Question/TranslatedText</td>\n<td>As it appears on the CRF</td>\n</tr>\n<tr>\n<td>Prompt</td>\n<td>ItemDef/Alias[@Context=\"prompt\"]/@Name</td>\n<td>If present in ODM-XML</td>\n</tr>\n<tr>\n<td>Completion Instructions</td>\n<td>ItemDef/Alias[@Context=\"completionInstructions\"]/@Name</td>\n<td>If present in ODM-XML</td>\n</tr>\n<tr>\n<td>Implementation Notes</td>\n<td>ItemDef/Alias[@Context=\"implementationNotes\"]/@Name</td>\n<td>If present in ODM-XML</td>\n</tr>\n<tr>\n<td>Mapping Instructions</td>\n<td>ItemDef/Alias[@Context='mappingInstructions']/@Name</td>\n<td>If present in ODM-XML</td>\n</tr>\n<tr>\n<td>CDASH</td>\n<td>ItemDef/Alias[@Context=\"CDASH\"]/@Name</td>\n<td>Optional, controlled by a parameter</td>\n</tr>\n<tr>\n<td>SDTM</td>\n<td>ItemDef/@SDSVarName <br/> ItemDef/Alias[@Context=\"SDTM\"]/@Name</td>\n<td>When @Domain attribute not present, Dataset.Variable syntax is assumed</td>\n</tr>\n</tbody>\n</table>\n<p>Great inspiration, as well as the CRF contents, is taken from the <a href=\"https://www.cdisc.org/kb/ecrf\">eCRF portal on the CDISC website</a>. I have made very few changes of my own to the CRF contents to adapt it to my solution. These do include a cleanup of the SDTM annotations and choices, such as:</p>\n<ul>\n<li>All text constants are enclosed in quotation marks</li>\n<li>Consistent use of single quotation marks in the SDTM annotations</li>\n<li>Addition of a reference number for each CRF Question. This has proved useful when reviewing CRFs</li>\n<li>Instructions/notes are written using a smaller font and in <em>italics</em></li>\n</ul>\n<h3>SDTM Datasets and Variables <a name=\"SDTM_Datasets_and_Variables\"/></h3>\n<p>Some debate has been encountered on how to capture Dataset name and Variable name for SDTM annotations in ODM-XML. Some ODM editing/generating systems use the <strong>ItemGroupDef/@Domain</strong> attribute to hold the Dataset name, some do not. Most seems to agree on <strong>ItemDef/@SDSVarName</strong> for the SDTM Variable name. I have chosen to support both, selecting <strong>ItemGroupDef/@Domain</strong> when present, but really encouraging using 2-level names in <strong>ItemDef/@SDSVarName</strong>.</p>\n<p>The main reason for this is to remove the binding between CRF layout and SDTM annotations, imposed by having the Dataset name in the <strong>@Domain</strong> attribute on <strong>@ItemGroupDef</strong> level, and the Variable name in the <strong>SDSVarName</strong> attribute on <strong>ItemDef</strong> level. While this may seem logical by mimicking the tabular Dataset/Variable structure, it really serves no purpose beyond dictating that CRF Forms must be designed following SDTM dataset structure. Practical experience has shown that complex Forms (e.g. Adverse events) often annotate to different SDTM domains (e.g. AE and SUPPAE) in an alternating way, and thus dictates the change of <strong>@ItemGroupDef</strong> (sections) to change domain, serving only SDTM annotation purposes.</p>\n<p>My [interim] solution is to have <strong>SDSVarName</strong> contain both Dataset name and Variable name separated by a period (e.g. AE.AETERM) in common SQL style. A better and more permanent solution is to advocate that <a href=\"https://www.cdisc.org/\">CDISC</a> moves the <strong>@Domain</strong> attribute to the <strong>ItemDef</strong> level i their ODM-XML specification. This will ensure that the Dataset name is specified at the same level as the Variable name, eliminating the need for the CRF sections to be structured after the SDTM annotations. Although this will call for redundant specification of Dataset names in an ODM file, ODM editing/generating systems ought to be able to populate this from SDTM specifications.</p>\n<h2>Parameters <a name=\"Parameters\"/></h2>\n<p>Parameters to the <code class=\"language-text\">crf_1_3_2.xsl</code> file are documented in the table below</p>\n<table>\n<thead>\n<tr>\n<th>Parameter</th>\n<th>Description</th>\n<th>Default value</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>parmdisplay</td>\n<td>Display mode</td>\n<td>spec</td>\n<td><strong>spec</strong>: CRF specification with implementation notes, SDTM annotations, etc. <br/> <strong>bcrf</strong>: Blank CRF for submission <br/> <strong>acrf</strong>: SDTM annotated CRF for submission <br/> <strong>book</strong>: Complete CRF book with forms repeated by visit</td>\n</tr>\n<tr>\n<td>parmstudy</td>\n<td>Name of study or standard</td>\n<td></td>\n<td>Can be derived from ODM file name</td>\n</tr>\n<tr>\n<td>parmversion</td>\n<td>Version of the ODM-XML file</td>\n<td></td>\n<td>Can be derived from ODM file name</td>\n</tr>\n<tr>\n<td>parmstatus</td>\n<td>Status of the ODM-XML file</td>\n<td></td>\n<td>Can be derived from ODM file name</td>\n</tr>\n<tr>\n<td>parmname</td>\n<td>Company name</td>\n<td>My Company</td>\n<td>User supplied</td>\n</tr>\n<tr>\n<td>parmlogo</td>\n<td>Company logo file name</td>\n<td></td>\n<td>User supplied</td>\n</tr>\n<tr>\n<td>parmlang</td>\n<td>Language of TranslatedText</td>\n<td>All, assuming one language</td>\n<td>Future implementation</td>\n</tr>\n<tr>\n<td>parmcdash</td>\n<td>Display CDASH annotation from Alias</td>\n<td>1</td>\n<td>If present, 0 or 1</td>\n</tr>\n</tbody>\n</table>\n<h2>Creating PDF documents <a name=\"Creating_PDF_documents\"/></h2>\n<p>In all browsers, print the CRF renditions as PDF documents on your disk as either SDTM annotated CRF specification,  complete CRF book, <a href=\"/examples/acrf.pdf\">acrf</a> or <a href=\"/examples/bcrf.pdf\">bcrf</a> submission documents, respectively. Please note:</p>\n<ul>\n<li>The on-screen button is not included in PDF documents created by printing to a PDF file</li>\n<li>The TOC will work correctly as links within the PDF documents</li>\n<li>Form names in the visit matrix works (when present) as links as well, in addition to the TOC</li>\n<li>All space delimited words in the SDTM annotations have link targets, reachable from <strong>define-xml</strong>, provided that CRF origins in <strong>define.xml</strong> are created as named destinations to SDTM variables, and not as page numbers</li>\n<li>The yellow background color of the SDTM annotations requires printing of background graphics to be part of PDF documents</li>\n<li>Headers and footers, portrait versus landscape, and other document properties can be controlled within the printing dialog of your browser</li>\n<li>Different browsers may behave slightly different</li>\n</ul>","frontmatter":{"title":"ðŸ¤” CRF to SDTM","date":"January 18, 2023","update":"January 18, 2023","tags":["CDISC","CRF","SDTM"],"series":"CDISC ì•Œì•„ë³´ê¸°"},"fields":{"slug":"/20230118/","readingTime":{"minutes":6.26}}},"seriesList":{"edges":[{"node":{"id":"663d5301-a645-527a-978e-458d02aeae04","fields":{"slug":"/20230118/"},"frontmatter":{"title":"ðŸ¤” CRF to SDTM"}}}]},"previous":{"fields":{"slug":"/lifelog/"},"frontmatter":{"title":"Personal Life Tracker: Organize and Reflect on My Life Journey"}},"next":null},"pageContext":{"id":"663d5301-a645-527a-978e-458d02aeae04","series":"CDISC ì•Œì•„ë³´ê¸°","previousPostId":"80356866-27ce-5814-bfd2-8fcfca86e926","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}